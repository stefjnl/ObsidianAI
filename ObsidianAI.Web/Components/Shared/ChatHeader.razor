@using System

<div class="header">
    <div class="header-main">
        <h1>ðŸ§  Obsidian AI</h1>
        <div class="header-actions">
            <select class="provider-select" @bind="SelectedProvider" @bind:event="onchange">
                <option value="LMStudio">LMStudio</option>
                <option value="OpenRouter">OpenRouter</option>
                <option value="NanoGPT">NanoGPT</option>
            </select>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public string CurrentProvider { get; set; } = "LMStudio";

    [Parameter]
    public EventCallback<string> OnProviderChanged { get; set; }

    private string selectedProvider = "LMStudio";

    private string SelectedProvider
    {
        get => selectedProvider;
        set
        {
            if (selectedProvider != value)
            {
                selectedProvider = value;
                if (OnProviderChanged.HasDelegate)
                {
                    _ = OnProviderChanged.InvokeAsync(value);
                }
            }
        }
    }

    protected override void OnParametersSet()
    {
        if (!string.Equals(selectedProvider, CurrentProvider, StringComparison.OrdinalIgnoreCase))
        {
            selectedProvider = CurrentProvider;
        }
    }
}